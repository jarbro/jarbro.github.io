<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[blog.jarbro.com]]></title><description><![CDATA[blog.jarbro.com]]></description><link>http://blog.jarbro.com</link><generator>RSS for Node</generator><lastBuildDate>Thu, 29 Dec 2016 03:45:55 GMT</lastBuildDate><atom:link href="http://blog.jarbro.com/rss/" rel="self" type="application/rss+xml"/><ttl>60</ttl><item><title><![CDATA[DNS Made Easy 2048 bit DKIM support]]></title><description><![CDATA[<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>If you have ever attempted to create your own DKIM key for your own mail server you know it can be a daunting task. Every flavor SMTP DKIM configuration is a bit different.  Though once you&#8217;ve gotten your SMTP server configured with your private and public key, the easiest part of the entire process should be to make the necessary changes at your DNS provider,right? Unfortunately, not all providers support automatically accepting 2048 bit DKIM keys and you are ready to bang your head against the wall.  Why dont they support a 2048 bit key or larger? Well, their system wont automatically handle keys larger than 255 contiguous characters because they haven&#8217;t updated their interfaces to handle RFC 4408.  More on this in a bit.</p>
</div>
<div class="paragraph">
<p>If you are using [<a href="https://cp.dnsmadeeasy.com/u/117059" class="bare">https://cp.dnsmadeeasy.com/u/117059</a>](DNS Made Easy) like I was, you probably ran across the error when trying to enter your DKIM key.</p>
</div>
<div class="paragraph">
<p><strong>"Contiguous strings may not be longer than 255 characters"</strong></p>
</div>
<div class="paragraph">
<p>Thankfully, [DNS RFC 4408](<a href="https://tools.ietf.org/html/rfc4408#section-3.1.3" class="bare">https://tools.ietf.org/html/rfc4408#section-3.1.3</a>) has a way for [handling](<a href="https://kb.isc.org/article/AA-00356/0/Can-I-have-a-TXT-or-SPF-record-longer-than-255-characters.html" class="bare">https://kb.isc.org/article/AA-00356/0/Can-I-have-a-TXT-or-SPF-record-longer-than-255-characters.html</a>) this. While there is no knowledge base entry on the DNSME support site, they do in fact support 2048 bit keys, but you&#8217;ll have to open a support ticket to get the answer.</p>
</div>
<div class="paragraph">
<p>I&#8217;ve generated a sample 2048 bit key using [Port25 DKIM Wizard](<a href="https://www.port25.com/dkim-wizard/" class="bare">https://www.port25.com/dkim-wizard/</a>) for my example.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example">Example</h6>
<div class="paragraph">
<p><strong>Generated 2048 bit key</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>v=DKIM1; k=rsa; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA38K27694dPpB72IgyYh/d6bOaSTe4vXlaPOFjAn4Mef8VGA8Cnvb2VWx0wV2HvqAR62iHjBVZc6otsYI35MIwOh6cunL5ypwIQ0+ALUd5+qUz6ww2vAPkt0iPudIwg41Zmv+tR74zZGNHtV+691i6jCYKEJ6iJlfJqwM+HigDy5T62Qp5FaVSDom/y4eLinme0Vdg1AZQ4Vg5/fK1PtVNTrqwFqzGy6IdmVjImfcNtAZ/CXSzKLUmsPHxo/ST88XFK9jUUW8vYcT9Yw+Ma0mce9mCcxITpCG5jrX07K+Y+kNJPesZ9v/prwQ+4JVtoT2FrJE6nFqHGLGpTzUVGKkTQIDAQAB</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Modified 2048 bit key for DNS Made Easy</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"v=DKIM1; k=rsa; p=MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA38K27694dPpB72IgyYh/d6bOaSTe4vXlaPOFjAn4Mef8VGA8Cnvb2VWx0wV2HvqAR62iHjBVZc6otsYI35MIwOh6cunL5ypwIQ0+ALUd5+qUz6ww2vAPkt0iPudIwg41Zmv+tR74zZGNHtV+691i6jCYKEJ6iJlfJqwM+HigDy5T62Qp5FaVSDom/y4eLinme"
"0Vdg1AZQ4Vg5/fK1PtVNTrqwFqzGy6IdmVjImfcNtAZ/CXSzKLUmsPHxo/ST88XFK9jUUW8vYcT9Yw+Ma0mce9mCcxITpCG5jrX07K+Y+kNJPesZ9v/prwQ+4JVtoT2FrJE6nFqHGLGpTzUVGKkTQIDAQAB"</code></pre>
</div>
</div>
<div class="paragraph">
<p>What I&#8217;ve done here is I&#8217;ve broken out the first 255 characters of the DKIM key and wrapped it in quotes.  The remaining characters are also wrapped in quotes.</p>
</div>
<div class="paragraph">
<p>without the DKIM it would look something like this.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"v=DKIM1; k=rsa................" "....................."</code></pre>
</div>
</div>
<div class="paragraph">
<p>To help you count characters, don&#8217;t count by hand, use this [tool](<a href="http://charactercounttool.com/" class="bare">http://charactercounttool.com/</a>).</p>
</div>
<div class="paragraph">
<p>Many DNS providers out there are smart enough to automatically handle long DKIM keys.  I&#8217;ve tested 2048 bit with the following providers who automatically handle long keys with ease.</p>
</div>
<div class="paragraph">
<p><strong>In no particular order</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>[Hurricane DNS (Free)](<a href="https://dns.he.net" class="bare">https://dns.he.net</a>)</p>
</li>
<li>
<p>[EasyDNS (Paid)](<a href="https://easydns.com" class="bare">https://easydns.com</a>)</p>
</li>
<li>
<p>[Cloudflare (Free/Paid](<a href="https://cloudflare.com" class="bare">https://cloudflare.com</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Some links above may be affiliate links to help cover my server costs and beer.</strong></p>
</div>
<div class="paragraph">
<p>Original post @ [blog.jarbro.com](<a href="http://jarb.ro/2cj60U0" class="bare">http://jarb.ro/2cj60U0</a>)</p>
</div>
</div>]]></description><link>http://blog.jarbro.com/2016/09/07/DNS-Made-Easy-2048-bit-DKIM-support.html</link><guid isPermaLink="true">http://blog.jarbro.com/2016/09/07/DNS-Made-Easy-2048-bit-DKIM-support.html</guid><category><![CDATA[DNS]]></category><category><![CDATA[ DKIM]]></category><dc:creator><![CDATA[Jared Brodsky]]></dc:creator><pubDate>Wed, 07 Sep 2016 00:00:00 GMT</pubDate></item><item><title><![CDATA[FileMaker Openfire API Integration]]></title><description><![CDATA[<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We&#8217;ve been using Openfire XMPP at my company since ~2004 and wanted to be able to push out some alerts to our users from FileMaker using our existing chat client. In this example we are just going to send a system broadcast message to all users. For other uses you can find the Full REST API documentation [here](<a href="https://www.igniterealtime.org/projects/openfire/plugins/restapi/readme.html" class="bare">https://www.igniterealtime.org/projects/openfire/plugins/restapi/readme.html</a>).</p>
</div>
<div class="paragraph">
<p>What you will need.
  - Latest Version of Openfire XMPP server [Link](<a href="https://igniterealtime.org/downloads/index.jsp#openfire" class="bare">https://igniterealtime.org/downloads/index.jsp#openfire</a>)
  - FileMaker Pro or Server
  - Base Elements Plugin [download](<a href="http://www.goya.com.au/baseelements/plugin" class="bare">http://www.goya.com.au/baseelements/plugin</a>)
  - Time, Love &amp; Tenderness</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_installation">Installation</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the Base Elements plugin into FileMaker. [More info.](<a href="http://help.filemaker.com/app/answers/detail/a_id/10097/~/installing-and-updating-plug-ins-in-filemaker-pro" class="bare">http://help.filemaker.com/app/answers/detail/a_id/10097/~/installing-and-updating-plug-ins-in-filemaker-pro</a>)</p>
</li>
<li>
<p>Login into the Openfire admin console and go to the plugins tab.  Click 'available plugins' and install the REST API plugin.</p>
</li>
<li>
<p>Go to Server &gt; Server Settings and click REST API on the left hand column.</p>
</li>
<li>
<p>Make sure you&#8217;ve enabled the plugin so it can receive API requests.</p>
</li>
<li>
<p>Enable 'Select Secret key auth' option</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>We are going to test with curl first to make sure you can connect to the REST API. Fire up your favorite terminal and enter the following.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-sh" data-lang="sh">$ curl -X POST -H "Authorization: &lt;YOUR SECRET KEY AUTH&gt;" -H "Content-Type: application/xml" -d '&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;&lt;message&gt;&lt;body&gt;Hello Neighbor!&lt;/body&gt;&lt;/message&gt;' "http://yourserver.org:9090/plugins/restapi/v1/messages/users"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If everything was configured correctly, you should get a broadcast message with "Hello Neighbor!" as the message.</p>
</div>
</div>
<div class="sect2">
<h3 id="_filemaker_integration">FileMaker Integration</h3>
<div class="paragraph">
<p>If your test was successful, lets start crafting our FileMaker script.  Due to the API requiring we send some custom headers, we cannot use the built-in Insert URL function, but have to rely on a plugin instead.  In this example we will be using the excellent and free [Base Elements Plugin](<a href="http://www.goya.com.au/baseelements/plugin" class="bare">http://www.goya.com.au/baseelements/plugin</a>).</p>
</div>
<div class="paragraph">
<p>Create a FM script called Openfire API</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Set Variable [ $url; Value:"http://yourserver.org:9090/plugins/restapi/v1/messages/users" ]
Set Variable [ $header; Value:BE_HTTP_Set_Custom_Header ( "Authorization"; "&lt;YOUR SECRET KEY AUTH&gt;") ]
Set Variable [ $header; Value:BE_HTTP_Set_Custom_Header ( "Content-Type"; "application/xml") ]
Set Variable [ $body; Value:"&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;&lt;message&gt;&lt;body&gt;Hello Neightbor!&lt;/body&gt;&lt;/message&gt;" ]
Set Variable [ $post; Value:BE_HTTP_POST ( $url; $body) ]
# Show Trace for Debugging - This is optional although it will help debug any potential issues.
Show Custom Dialog [ Title: "Trace"; Message: BE_Curl_Trace; Default Button: “OK”, Commit: “Yes”; Button 2: “Cancel”, Commit: “No” ]
Exit Script[]</pre>
</div>
</div>
<div class="paragraph">
<p>Run the script and you should get the same result as when you executed the HTTP POST using curl.  Magic!</p>
</div>
</div>
<div class="sect1">
<h2 id="_thanks">Thanks</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>An invaluable tool while testing was [Postman](<a href="https://www.getpostman.com/" class="bare">https://www.getpostman.com/</a>).  If you don&#8217;t know about it, you should download and install ASAP.  It&#8217;s a free plugin for Chrome.</p>
</li>
<li>
<p>The guys over at [Ignite Realtime](<a href="http://www.igniterealtime.org" class="bare">http://www.igniterealtime.org</a>)</p>
</li>
<li>
<p>The FileMaker community, especially the guys over at FMSLUG.</p>
</li>
<li>
<p>BaseElements for the free plugin that makes this work.</p>
</li>
</ul>
</div>
</div>
</div>]]></description><link>http://blog.jarbro.com/2016/08/17/File-Maker-Openfire-API-Integration.html</link><guid isPermaLink="true">http://blog.jarbro.com/2016/08/17/File-Maker-Openfire-API-Integration.html</guid><category><![CDATA[filemaker]]></category><category><![CDATA[ xmpp]]></category><category><![CDATA[ openfire]]></category><dc:creator><![CDATA[Jared Brodsky]]></dc:creator><pubDate>Wed, 17 Aug 2016 00:00:00 GMT</pubDate></item></channel></rss>